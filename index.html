<!DOCTYPE html>
<html>
<body>

    <img id="test"  alt="Test" width="300" height="300"><!--src="images/payload.jpg"-->
    <canvas id="myCanvas" width="300" height="300" style="border:1px solid #d3d3d3;">
        Your browser does not support the HTML5 canvas tag.
    </canvas>
    <table>
        <tbody>
        <tr>
            <td>
                <canvas id="myCanvas1"  style="border:1px solid #d3d3d3;">
                    Your browser does not support the HTML5 canvas tag.
                </canvas>
            </td>
            <td>
                <canvas id="myCanvas2"  style="border:1px solid #d3d3d3;">
                    Your browser does not support the HTML5 canvas tag.
                </canvas>
            </td>
            <td>
                <canvas id="myCanvas3"  style="border:1px solid #d3d3d3;">
                    Your browser does not support the HTML5 canvas tag.
               </canvas>
            </td>
     </tr>
    <tr>
    <td>
    <canvas id="myCanvas4"  style="border:1px solid #d3d3d3;">
        Your browser does not support the HTML5 canvas tag.
    </canvas>
     </td>
     <td>
    <canvas id="myCanvas5"  style="border:1px solid #d3d3d3;">
        Your browser does not support the HTML5 canvas tag.
    </canvas>
     </td>
    <td>
    <canvas id="myCanvas6"  style="border:1px solid #d3d3d3;">
        Your browser does not support the HTML5 canvas tag.
    </canvas>
    </td>
    </tr>
    <tr>
    <td>
    <canvas id="myCanvas7"  style="border:1px solid #d3d3d3;">
        Your browser does not support the HTML5 canvas tag.
    </canvas>
    </td>
    <td>
    <canvas id="myCanvas8"  style="border:1px solid #d3d3d3;">
        Your browser does not support the HTML5 canvas tag.
    </canvas>
    </td>
    <td>
    <canvas id="myCanvas9"  style="border:1px solid #d3d3d3;">
        Your browser does not support the HTML5 canvas tag.
    </canvas>
    </td>
    </tr>
    </tbody>
    </table>
    <script>
        
        function setImage(url,number) {
            var cut_width;
            var cut_length;
            if (number == 9)
            {
                cut_width = 3;
                cut_length = 3;
            }
            if (number == 8)
            {
                cut_width = 2;
                cut_length = 4;
            }

            document.getElementById("test").src = url;
            document.getElementById("test").onload = function () {
                var c = document.getElementById("myCanvas");
                var ctx = c.getContext("2d");
                var img = document.getElementById("test");
                ctx.drawImage(img, 0, 0);
                var imgData;
                var cc = new Array();
                var cctx = new Array();
                var i;
                for (i = 0; i < number; i++) {
                    var imgData = ctx.getImageData(Math.floor(i % cut_width) * (300 / cut_width), Math.floor(i / cut_length) * (300 / cut_width), 300 / cut_width, 300 / cut_length);
                    var temp = (i + 1).toString();
                    cc[i] = document.getElementById("myCanvas" + temp);
                    cc[i].width = 300 / cut_width;
                    cc[i].height = 300 / cut_length;
                    cctx[i] = cc[i].getContext("2d");
                    //ctx2.drawImage(imgData, 0, 0);
                    cctx[i].putImageData(imgData, 0, 0);
                }
                if (number==8)
                {
                    var imgData = ctx.getImageData(Math.floor(i % cut_width) * (300 / cut_width), Math.floor(i / cut_length) * (300 / cut_width), 300 / cut_width, 300 / cut_length);
                    var temp = (number + 1).toString();
                    cc[number] = document.getElementById("myCanvas" + temp);
                    cc[number].width = 300 / cut_width;
                    cc[number].height = 300 / cut_length;
                    cctx[number] = cc[i].getContext("2d");
                    //ctx2.drawImage(imgData, 0, 0);
                    cctx[number].putImageData(imgData, 0, 0);
                    cc[number].style.visibility = 'hidden';
                }
            };
            
        }
        var url = "images/payload_8.jpg";
        setImage(url,8);
    </script>

    <p>
        <strong>Note:</strong> The canvas tag is not supported in Internet
        Explorer 8 and earlier versions.
    </p>

</body>
</html>
